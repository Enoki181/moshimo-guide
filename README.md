# エンディングノート制作ガイドアプリ　もしもの案内所

## サービス概要
「大事な人への道しるべづくり」をコンセプトに、アナログのエンディングノート作成を支援するチェックリストアプリです。LINE風の対話を通じて、整理すべき情報を棚卸しし、それをもとにユーザー専用のチェックリストを自動で生成して進捗を管理できます。

## このサービスへの思い・作りたい理由
先日、闘病していた母が急逝しました。その直後から私たち家族に襲いかかったのは、葬儀だけでなく、役所や銀行関係の手続き、母だけが把握していたサブスクの解約など膨大なタスク。何をするべきなのか調べることから始めなければならず、満足に母を悼む時間も奪われる日々でした。幸いにも、母が父にPCやスマホのログイン情報を共有していましたが、もし知らなかったら、母のSNSや残したメッセージすらわからなかったと気づき、強い危機感を覚えました。母の印鑑を探すために思い当たる場所を捜索したことも記憶に新しいです。  
この経験から、肉親が亡くなったあと、残された家族は次の2点によって、故人の意図しないところで負担が増大すると痛感しました。
- 故人に関わる手続きについて、どのような手続きが必要なのか把握できていないこと。
- 上記の手続きに必要なものや情報について、どこにある(記録している)か、あるいは記録していないかわからないこと。  

そこで、死後にどういった情報が必要になるのかがわかることと、それについて書き記したものがエンディングノートとしてまとまっていれば、残された人も迷わず手続きなどができるのではないかと考えました。  
ただ、既存のエンディングノートアプリには、更新が容易であることなどのメリットがある反面、以下の懸念点があります。　

- ネット上に機密情報などをまとめることに対するセキュリティ面の不安がある。
- デジタルの操作が不慣れなので、機能が多すぎて何をすればいいかわからない。
- 項目が多すぎて気おくれ・挫折の原因となる。
- そもそもエンディングノートの作成に心理的な抵抗がある。  

上記を踏まえ「機密情報をアプリにもたせない」ことで安心感を提供し、親しみやすくわかりやすいUIと、ガイド役の「あんないさん」との対話形式で整理すべき情報を簡単に棚卸しできるしくみでエンディングノート制作へのハードルを下げるようなアプリをつくりたいと考えました。私や私の家族のような思いをする人を1人でも減らし、故人を穏やかに偲べる時間を守れますように。そんな願いをこのアプリに込めています。

## ユーザー層について
### 自身でエンディングノートを制作したい方
- 高齢者など、デジタルが苦手な方で終活をしたい方
難しい操作は苦手であるため、複雑なアプリは敬遠するが、簡単な操作であれば取り組める可能性があるため。また、実際に機密情報を書き入れるのはアナログ作業なので、アナログ派の方にはとっつきやすい印象をもたれる可能性があると考えられる。
- 40代〜60代の「終活」を意識し始めた方
エンディングノートの必要性は感じているが、項目が多すぎて何から手をつければいいのか、自身に不要な項目は何かなどがわからず、作業を進める障害となっている可能性があるため。何を整理すべきか効率的に知りたい方に、需要があると考えられる。
### 誰かにエンディングノート制作を勧めたり、代理でつくりたい方
- 親族に終活を勧める30代〜40代の子世代、代理でエンディングノートを作成したい方
「死の準備」をさせるのは抵抗があるが、アプリを会話のネタにすることで、「あなたの大事なものを守るために教えて」と切り出しやすくできる可能性があるため。また、エンディングノート作成に悩む親などに勧めるケースや、代理で操作し、エンディングノート制作を担うケースも考えられる。

## サービスの利用イメージ
### 1．導入(TOPページ)  
LINEログイン後、TOPページで以下の選択肢が表示されます。
- **カテゴリを知る**: カテゴリツアーで主要カテゴリについて確認する
- **整理をはじめる**: マイページへ

### 2．選択（マイページ）  
マイページにはカテゴリ一覧（進捗プログレスバー有）を表示し、ユーザーは整理したいカテゴリを選択します。

### 3．あんないさんと問答（未回答時）  
選択したカテゴリに関するあんないさんからの質問(「ネット銀行は使っていますか？」等)に回答します。

### 4．リストの自動生成  
回答に基づき、その人専用の「ノートに書くべき項目リスト」が自動生成されます。

### 5．管理と補助  
リストを見ながらノートを書き進め、カテゴリや項目の進捗をアプリでチェックします。

### ★価値
- ユーザーは「何を書き残せば家族が安心か」を最小限の労力で把握でき、実際の情報は「自分だけが知るノート」へ安全に書き残すことができます。
- 「今、何が終わっていて、次に何をすべきか」が可視化されるため、挫折せずにエンディングノートを完成させることができます。

## ユーザーの獲得について
- SNSマーケティング（公式発信）：「帰省時にこれだけは親に確認しよう」といった具体的なチェック項目を画像化して発信。アプリを使えば自分専用のリストがすぐつくれることを訴求します。
- 自身の親族からの口コミ：まずは自身の家族や親族に利用してもらい、フィードバックを得ながら「親戚間での紹介」という信頼ベースの広がりを目指します。
- 情報発信による信頼獲得：開発の背景(実体験)をnoteなどで発信し、エンディングノート作成に悩む層への共感を通じて認知を広げます。

## サービスの差別化ポイント・推しポイント
- 「機密情報を書かせない」ことによる安心感: 既存のアプリが機密情報を入力させる中、本アプリはあくまで「何を書くべきか」を教えるガイドに徹することで、セキュリティ面の不安を解消します。
- 対話形式で効率的なタスクの絞り込みが可能: 入力項目を羅列するのではなく、対話を通して整理する必要がある情報を棚卸しする形式としています。単純な質問に回答するだけなので、効率的に整理すべき情報を絞り込むことができ、取り組みやすいです。
- ガイド役「あんないさん」の存在: 「一人でやる重い作業」を「あんないさんと進める散歩」のような体験に変える、優しくシンプルなUI/UX。

## 機能候補
### MVPリリース時
- LINEログイン（LIFF）: 導入ハードルの低減。
- 棚卸し問答機能:カテゴリごとの5問程度の質問回答により整理すべき情報を棚卸し。
- カテゴリ別チェックリスト: 質問回答に応じたカテゴリ別のタスクの自動生成。
- マイページ(進捗可視化): チェックリストのチェック状況に応じ、カテゴリ・全体の進捗を数値、プログレスバーで表示。
- カテゴリツアー: 主要カテゴリ（デジタル、金融、暮らし、医療、つながり）の提示。カテゴリごとにどのような情報が、どのような手続きに必要となるのか説明。
- あんないさんのメッセージ: 進捗に応じて「ここまで整理できましたね！」など励ましメッセージを表示。
- ヘルプページ: アプリの使い方。

### 本リリース時
- 詳細確認用の質問の追加: 登録しているサブスクや口座のある銀行名など、詳細タスクを設定するための質問追加と、それに伴うタスクの追加生成。 
- あんないさんのガイド： 各タスクについて「なぜこれが必要か」などのヒントを、あんないさんのアイコンをタップして表示。
- タスクの直接編集機能: 生成されたリストの文言修正や削除。
- ブラウザ出力機能: 整理リストの印刷、およびノート用記入リフィルの出力。
- 道しるべの出力機能: 問答の結果から、大切な人へ渡すためのフォーマットを作成。ノートに整理した(する)情報や、死後お願いする手続きなどを一覧化。ノートのありかを書く欄も設ける。
- LINE通知機能: 定期的な見直しを促すリマインド。
- ヘルプページ増補: エンディングノートQ&A。

### 将来の展望
- AI連携: 「教えてあんないさん」ページ。自由入力の質問に対し、AIが専門用語などについて解説。
- 秘密の小部屋: 防衛術（ノートの隠し場所や、ノートが盗難にあった場合の対処、その他相談等）を閲覧できるページ。
- 管理者用ダッシュボード: 法改正等に応じた「カテゴリ・問答・タスク・アドバイス」の即時更新機能。
- LINE通知機能増補: 上記機能による更新のお知らせや、新規の問答が存在する場合に通知。
- マルチプロフィール: 家族などの情報を代理で整理・管理できる機能。

## 使用する技術スタック
### 実装イメージ（CRUD以外）
#### 1. タスク動的生成の仕組み
- QuestionモデルとTaskTemplateモデルを紐付け
- 回答に応じてhas_manyの関連を動的に生成
#### 2. Hotwireによる進捗更新
- Turbo Framesで各カテゴリの進捗バーを部分更新
- チェックボックスのonchangeイベントでTurbo Streamをトリガー
####  3.あんないさん(ガイド役)のポップアップ
- Stimulus（JavaScript）を用いて、画面遷移なしでガイドのアドバイスやメッセージをふわっと表示
####  4.出力用画面生成(ブラウザ機能による出力)
- Print CSS等を用い、ブラウザからそのままA4印刷可能なレイアウトを提供。
#### 5.AI API連携
- 今後の展望として、OpenAIなどのAPIを利用し、ユーザーの疑問に対してガイドさんの口調で回答するボット機能を検討。

### 技術スタック
- フレームワーク: Ruby on Rails 7.2 (Ruby 3.3系)
- フロントエンド: Hotwire (Turbo, Stimulus), Tailwind CSS / daisyUI
- データベース: PostgreSQL(Neon)
- 認証: LINEログイン (LIFF SDK)
- デプロイ先: Render

### 使用予定のライブラリ:
- liff-sdk (LINE内でのアプリ実行)
- line-bot-api(本リリース時のリマインド通知用) 
- lucide-rails (アイコン表示)

## ER図（MVP時点）
- Users（LINEログイン情報）
- Categories（主要5カテゴリ）
- Questions（各カテゴリの質問）
- Answers（ユーザーの回答）
- TaskTemplates（タスクのマスターデータ）
- UserTasks（生成されたユーザー専用タスク）

## 画面遷移図（MVP時点）
### ▶︎未ログイン時、外部から直接アクセスした場合
- LINEでログインするように促すリンク

### ▶︎公式アカウントトークルーム
- もしもの案内所ロゴボタン(アプリへの入口)

### ▶︎ユーザー画面
#### TOP画面
- タイトルロゴ
- 整理をはじめるボタン
- カテゴリを知るボタン
- アプリ概要
- 使い方

#### マイページ
- タイトルロゴ
- 全体の進捗バー
- カテゴリボタンwith進捗バー
- カテゴリツアーボタン
- ヘルプページボタン

#### カテゴリ別問答ページ　(未回答時のみ)
- タイトルロゴ
- あんないさんからの質問

#### カテゴリ別チェックリストページ
- タイトルロゴ
- 整理すべき情報チェックリスト(回答から自動生成)
- 進捗表示(プログレスバー)

#### カテゴリツアーページ
- タイトルロゴ
- 主要なカテゴリ
- どういう情報がどういう手続きに必要か(カテゴリ別)

#### ヘルプページ
- タイトルロゴ
- 使い方
- お問い合わせ
- 利用規約
- プライバシーポリシー

Figma: [画面遷移図案](https://www.figma.com/design/5r4lMUUYAeNo1c9tir7UqY/%E3%82%82%E3%81%97%E3%82%82%E3%81%AE%E6%A1%88%E5%86%85%E6%89%80_%E5%8D%92%E6%A5%AD%E5%88%B6%E4%BD%9C?node-id=3-127&t=HTBSdRS6wWfctcmD-1)
